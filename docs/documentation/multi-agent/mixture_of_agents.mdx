---
name: "MixtureOfAgents"
description: "Collaborative swarm where multiple agents work together on the same task, combining their expertise for comprehensive solutions"
---

**Swarm Type**: `MixtureOfAgents`

## Overview

The MixtureOfAgents swarm type brings together multiple specialized agents to work collaboratively on the same task. This architecture leverages the collective intelligence and diverse perspectives of multiple agents, combining their expertise to produce more comprehensive and nuanced solutions than any single agent could achieve alone.

Key features:
- **Collaborative Analysis**: Multiple agents work together on the same task
- **Diverse Perspectives**: Different viewpoints and expertise areas
- **Comprehensive Solutions**: Combined insights from multiple specialists
- **Enhanced Quality**: Better results through collective intelligence

## Use Cases

- Complex problem analysis requiring multiple viewpoints
- Content creation with multiple expert perspectives
- Research projects needing interdisciplinary approaches
- Decision-making with diverse stakeholder input

## API Usage

### Basic MixtureOfAgents Example

<Tabs>
<Tab title="Shell (curl)">
```bash
curl -X POST "https://api.swarms.world/v1/swarm/completions" \
  -H "x-api-key: $SWARMS_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Comprehensive Market Analysis",
    "description": "Multi-perspective market analysis combining various expert viewpoints",
    "swarm_type": "MixtureOfAgents",
    "task": "Analyze the current state and future prospects of the electric vehicle market from multiple perspectives",
    "agents": [
      {
        "agent_name": "Technology Analyst",
        "description": "Analyzes technological trends and innovations",
        "system_prompt": "You are a technology analyst specializing in automotive and battery technologies. Focus on technological advancements, innovation trends, and technical challenges in the EV market.",
        "model_name": "gpt-4o",
        "max_loops": 1,
        "temperature": 0.3
      },
      {
        "agent_name": "Economic Analyst",
        "description": "Analyzes market economics and financial aspects",
        "system_prompt": "You are an economic analyst specializing in automotive markets. Focus on market economics, pricing trends, cost analysis, and financial viability of EV adoption.",
        "model_name": "gpt-4o",
        "max_loops": 1,
        "temperature": 0.3
      },
      {
        "agent_name": "Environmental Specialist",
        "description": "Analyzes environmental impact and sustainability",
        "system_prompt": "You are an environmental specialist focusing on sustainability. Analyze the environmental impact of EVs, lifecycle analysis, and sustainability benefits compared to traditional vehicles.",
        "model_name": "gpt-4o",
        "max_loops": 1,
        "temperature": 0.3
      },
      {
        "agent_name": "Policy Expert",
        "description": "Analyzes regulatory and policy landscape",
        "system_prompt": "You are a policy expert specializing in automotive regulations. Focus on government policies, incentives, regulatory requirements, and policy trends affecting the EV market.",
        "model_name": "gpt-4o",
        "max_loops": 1,
        "temperature": 0.3
      }
    ],
    "max_loops": 1
  }'
```
</Tab>

<Tab title="Python (requests)">
```python
import requests
import json

API_BASE_URL = "https://api.swarms.world"
API_KEY = "your_api_key_here"

headers = {
    "x-api-key": API_KEY,
    "Content-Type": "application/json"
}

swarm_config = {
    "name": "Comprehensive Market Analysis",
    "description": "Multi-perspective market analysis combining various expert viewpoints",
    "swarm_type": "MixtureOfAgents",
    "task": "Analyze the current state and future prospects of the electric vehicle market from multiple perspectives",
    "agents": [
        {
            "agent_name": "Technology Analyst",
            "description": "Analyzes technological trends and innovations",
            "system_prompt": "You are a technology analyst specializing in automotive and battery technologies. Focus on technological advancements, innovation trends, and technical challenges in the EV market.",
            "model_name": "gpt-4o",
            "max_loops": 1,
            "temperature": 0.3
        },
        {
            "agent_name": "Economic Analyst",
            "description": "Analyzes market economics and financial aspects",
            "system_prompt": "You are an economic analyst specializing in automotive markets. Focus on market economics, pricing trends, cost analysis, and financial viability of EV adoption.",
            "model_name": "gpt-4o",
            "max_loops": 1,
            "temperature": 0.3
        },
        {
            "agent_name": "Environmental Specialist",
            "description": "Analyzes environmental impact and sustainability",
            "system_prompt": "You are an environmental specialist focusing on sustainability. Analyze the environmental impact of EVs, lifecycle analysis, and sustainability benefits compared to traditional vehicles.",
            "model_name": "gpt-4o",
            "max_loops": 1,
            "temperature": 0.3
        },
        {
            "agent_name": "Policy Expert",
            "description": "Analyzes regulatory and policy landscape",
            "system_prompt": "You are a policy expert specializing in automotive regulations. Focus on government policies, incentives, regulatory requirements, and policy trends affecting the EV market.",
            "model_name": "gpt-4o",
            "max_loops": 1,
            "temperature": 0.3
        }
    ],
    "max_loops": 1
}

response = requests.post(
    f"{API_BASE_URL}/v1/swarm/completions",
    headers=headers,
    json=swarm_config
)

if response.status_code == 200:
    result = response.json()
    print("MixtureOfAgents swarm completed successfully!")
    print(f"Cost: ${result['metadata']['billing_info']['total_cost']}")
    print(f"Execution time: {result['metadata']['execution_time_seconds']} seconds")
    print(f"Collaborative results: {result['output']}")
else:
    print(f"Error: {response.status_code} - {response.text}")
```
</Tab>

<Tab title="JavaScript (fetch)">
```javascript
const API_BASE_URL = "https://api.swarms.world";
const API_KEY = "your_api_key_here";

const headers = {
    "x-api-key": API_KEY,
    "Content-Type": "application/json"
};

const swarmConfig = {
    name: "Comprehensive Market Analysis",
    description: "Multi-perspective market analysis combining various expert viewpoints",
    swarm_type: "MixtureOfAgents",
    task: "Analyze the current state and future prospects of the electric vehicle market from multiple perspectives",
    agents: [
        {
            agent_name: "Technology Analyst",
            description: "Analyzes technological trends and innovations",
            system_prompt: "You are a technology analyst specializing in automotive and battery technologies. Focus on technological advancements, innovation trends, and technical challenges in the EV market.",
            model_name: "gpt-4o",
            max_loops: 1,
            temperature: 0.3
        },
        {
            agent_name: "Economic Analyst",
            description: "Analyzes market economics and financial aspects",
            system_prompt: "You are an economic analyst specializing in automotive markets. Focus on market economics, pricing trends, cost analysis, and financial viability of EV adoption.",
            model_name: "gpt-4o",
            max_loops: 1,
            temperature: 0.3
        },
        {
            agent_name: "Environmental Specialist",
            description: "Analyzes environmental impact and sustainability",
            system_prompt: "You are an environmental specialist focusing on sustainability. Analyze the environmental impact of EVs, lifecycle analysis, and sustainability benefits compared to traditional vehicles.",
            model_name: "gpt-4o",
            max_loops: 1,
            temperature: 0.3
        },
        {
            agent_name: "Policy Expert",
            description: "Analyzes regulatory and policy landscape",
            system_prompt: "You are a policy expert specializing in automotive regulations. Focus on government policies, incentives, regulatory requirements, and policy trends affecting the EV market.",
            model_name: "gpt-4o",
            max_loops: 1,
            temperature: 0.3
        }
    ],
    max_loops: 1
};

fetch(`${API_BASE_URL}/v1/swarm/completions`, {
    method: "POST",
    headers: headers,
    body: JSON.stringify(swarmConfig)
})
.then(response => response.json())
.then(result => {
    if (result.status === "success") {
        console.log("MixtureOfAgents swarm completed successfully!");
        console.log(`Cost: $${result.metadata.billing_info.total_cost}`);
        console.log(`Execution time: ${result.metadata.execution_time_seconds} seconds`);
        console.log("Collaborative results:", result.output);
    }
})
.catch(error => console.error("Error:", error));
```
</Tab>

<Tab title="Go">
```go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "io/ioutil"
    "net/http"
)

type Agent struct {
    AgentName    string  `json:"agent_name"`
    Description  string  `json:"description"`
    SystemPrompt string  `json:"system_prompt"`
    ModelName    string  `json:"model_name"`
    MaxLoops     int     `json:"max_loops"`
    Temperature  float64 `json:"temperature"`
}

type SwarmConfig struct {
    Name        string   `json:"name"`
    Description string   `json:"description"`
    SwarmType   string   `json:"swarm_type"`
    Task        string   `json:"task"`
    Agents      []Agent  `json:"agents"`
    MaxLoops    int      `json:"max_loops"`
}

func main() {
    API_BASE_URL := "https://api.swarms.world"
    API_KEY := "your_api_key_here"

    swarmConfig := SwarmConfig{
        Name:        "Comprehensive Market Analysis",
        Description: "Multi-perspective market analysis combining various expert viewpoints",
        SwarmType:   "MixtureOfAgents",
        Task:        "Analyze the current state and future prospects of the electric vehicle market from multiple perspectives",
        Agents: []Agent{
            {
                AgentName:    "Technology Analyst",
                Description:  "Analyzes technological trends and innovations",
                SystemPrompt: "You are a technology analyst specializing in automotive and battery technologies. Focus on technological advancements, innovation trends, and technical challenges in the EV market.",
                ModelName:    "gpt-4o",
                MaxLoops:     1,
                Temperature:  0.3,
            },
            {
                AgentName:    "Economic Analyst",
                Description:  "Analyzes market economics and financial aspects",
                SystemPrompt: "You are an economic analyst specializing in automotive markets. Focus on market economics, pricing trends, cost analysis, and financial viability of EV adoption.",
                ModelName:    "gpt-4o",
                MaxLoops:     1,
                Temperature:  0.3,
            },
            {
                AgentName:    "Environmental Specialist",
                Description:  "Analyzes environmental impact and sustainability",
                SystemPrompt: "You are an environmental specialist focusing on sustainability. Analyze the environmental impact of EVs, lifecycle analysis, and sustainability benefits compared to traditional vehicles.",
                ModelName:    "gpt-4o",
                MaxLoops:     1,
                Temperature:  0.3,
            },
            {
                AgentName:    "Policy Expert",
                Description:  "Analyzes regulatory and policy landscape",
                SystemPrompt: "You are a policy expert specializing in automotive regulations. Focus on government policies, incentives, regulatory requirements, and policy trends affecting the EV market.",
                ModelName:    "gpt-4o",
                MaxLoops:     1,
                Temperature:  0.3,
            },
        },
        MaxLoops: 1,
    }

    jsonData, _ := json.Marshal(swarmConfig)
    
    req, _ := http.NewRequest("POST", API_BASE_URL+"/v1/swarm/completions", bytes.NewBuffer(jsonData))
    req.Header.Set("x-api-key", API_KEY)
    req.Header.Set("Content-Type", "application/json")

    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        fmt.Printf("Error: %v\n", err)
        return
    }
    defer resp.Body.Close()

    body, _ := ioutil.ReadAll(resp.Body)
    fmt.Printf("Response: %s\n", string(body))
}
```
</Tab>

<Tab title="Rust">
```rust
use reqwest::Client;
use serde_json::{json, Value};
use std::error::Error;

#[tokio::main]
async fn main() -> Result<(), Box<dyn Error>> {
    let api_base_url = "https://api.swarms.world";
    let api_key = "your_api_key_here";

    let swarm_config = json!({
        "name": "Comprehensive Market Analysis",
        "description": "Multi-perspective market analysis combining various expert viewpoints",
        "swarm_type": "MixtureOfAgents",
        "task": "Analyze the current state and future prospects of the electric vehicle market from multiple perspectives",
        "agents": [
            {
                "agent_name": "Technology Analyst",
                "description": "Analyzes technological trends and innovations",
                "system_prompt": "You are a technology analyst specializing in automotive and battery technologies. Focus on technological advancements, innovation trends, and technical challenges in the EV market.",
                "model_name": "gpt-4o",
                "max_loops": 1,
                "temperature": 0.3
            },
            {
                "agent_name": "Economic Analyst",
                "description": "Analyzes market economics and financial aspects",
                "system_prompt": "You are an economic analyst specializing in automotive markets. Focus on market economics, pricing trends, cost analysis, and financial viability of EV adoption.",
                "model_name": "gpt-4o",
                "max_loops": 1,
                "temperature": 0.3
            },
            {
                "agent_name": "Environmental Specialist",
                "description": "Analyzes environmental impact and sustainability",
                "system_prompt": "You are an environmental specialist focusing on sustainability. Analyze the environmental impact of EVs, lifecycle analysis, and sustainability benefits compared to traditional vehicles.",
                "model_name": "gpt-4o",
                "max_loops": 1,
                "temperature": 0.3
            },
            {
                "agent_name": "Policy Expert",
                "description": "Analyzes regulatory and policy landscape",
                "system_prompt": "You are a policy expert specializing in automotive regulations. Focus on government policies, incentives, regulatory requirements, and policy trends affecting the EV market.",
                "model_name": "gpt-4o",
                "max_loops": 1,
                "temperature": 0.3
            }
        ],
        "max_loops": 1
    });

    let client = Client::new();
    let response = client
        .post(&format!("{}/v1/swarm/completions", api_base_url))
        .header("x-api-key", api_key)
        .header("Content-Type", "application/json")
        .json(&swarm_config)
        .send()
        .await?;

    if response.status().is_success() {
        let result: Value = response.json().await?;
        println!("MixtureOfAgents swarm completed successfully!");
        println!("Response: {:?}", result);
    } else {
        println!("Error: {}", response.status());
    }

    Ok(())
}
```
</Tab>
</Tabs>

**Example Response**:
```json
{
    "job_id": "swarms-M17nZFDesmLHxCRoeyF3NVYvPaXk",
    "status": "success",
    "swarm_name": "Comprehensive Market Analysis",
    "description": "Multi-perspective market analysis combining various expert viewpoints",
    "swarm_type": "MixtureOfAgents",
    "output": [
        {
            "role": "Technology Analyst",
            "content": "From a technological perspective, the EV market is experiencing rapid innovation in battery technology, with solid-state batteries and improved energy density..."
        },
        {
            "role": "Economic Analyst",
            "content": "Economically, the EV market shows strong growth potential with declining battery costs and increasing consumer adoption..."
        },
        {
            "role": "Environmental Specialist",
            "content": "Environmentally, EVs offer significant benefits in reducing greenhouse gas emissions, though the full lifecycle impact depends on electricity sources..."
        },
        {
            "role": "Policy Expert",
            "content": "Policy-wise, governments worldwide are implementing various incentives and regulations to accelerate EV adoption..."
        }
    ],
    "number_of_agents": 4,
    "service_tier": "standard",
    "execution_time": 32.1,
    "usage": {
        "input_tokens": 40,
        "output_tokens": 2800,
        "total_tokens": 2840,
        "billing_info": {
            "cost_breakdown": {
                "agent_cost": 0.04,
                "input_token_cost": 0.00012,
                "output_token_cost": 0.042,
                "token_counts": {
                    "total_input_tokens": 40,
                    "total_output_tokens": 2800,
                    "total_tokens": 2840
                },
                "num_agents": 4,
                "service_tier": "standard",
                "night_time_discount_applied": true
            },
            "total_cost": 0.08212,
            "discount_active": true,
            "discount_type": "night_time",
            "discount_percentage": 75
        }
    }
}
```

## Tutorial: Build a Startup Due Diligence System

In this tutorial, you'll build an investment due diligence system where multiple expert agents analyze the same startup from different perspectives. MixtureOfAgents excels when you need diverse expert opinions on a single topic, combining their insights for comprehensive decision-making.

### What You'll Build

A multi-expert due diligence system featuring:
1. **Technical Expert** - Evaluates technology stack, IP, and engineering team
2. **Financial Analyst** - Assesses financials, burn rate, and valuation
3. **Market Strategist** - Analyzes market opportunity and competition
4. **Legal Advisor** - Reviews legal structure and risk factors

All experts analyze the **same startup** and provide their specialized perspective.

### Prerequisites

- Python 3.8+
- A Swarms API key ([get one here](https://swarms.world))
- `requests` library (`pip install requests`)

### Step 1: Set Up Your Environment

```python
import requests
import json
import os
from dataclasses import dataclass
from typing import Optional

# Configuration
API_BASE_URL = "https://api.swarms.world"
API_KEY = os.environ.get("SWARMS_API_KEY", "your_api_key_here")

headers = {
    "x-api-key": API_KEY,
    "Content-Type": "application/json"
}
```

### Step 2: Define the Startup Data Model

Structure the information that all experts will analyze:

```python
@dataclass
class StartupProfile:
    """Data structure for startup being evaluated."""
    name: str
    industry: str
    description: str
    founded_year: int
    stage: str  # "Pre-seed", "Seed", "Series A", etc.
    funding_sought: str
    team_size: int
    revenue: Optional[str] = None
    tech_stack: Optional[str] = None
    key_metrics: Optional[str] = None
    competitors: Optional[str] = None

    def to_prompt_context(self) -> str:
        """Format startup data for the prompt."""
        return f"""
STARTUP PROFILE
===============
Company: {self.name}
Industry: {self.industry}
Description: {self.description}
Founded: {self.founded_year}
Stage: {self.stage}
Funding Sought: {self.funding_sought}
Team Size: {self.team_size}
Revenue: {self.revenue or 'Not disclosed'}
Tech Stack: {self.tech_stack or 'Not specified'}
Key Metrics: {self.key_metrics or 'Not provided'}
Competitors: {self.competitors or 'Not specified'}
"""
```

### Step 3: Create Expert Agent Definitions

Each expert focuses on their domain while analyzing the same startup:

```python
def create_due_diligence_experts() -> list[dict]:
    """Create the panel of expert agents for due diligence."""

    return [
        {
            "agent_name": "Technical Due Diligence Expert",
            "description": "Evaluates technology, engineering, and technical risks",
            "system_prompt": """You are a Technical Due Diligence Expert with 15+ years of experience evaluating startup technology.

Your analysis should cover:

1. **TECHNOLOGY ASSESSMENT**
   - Tech stack evaluation (scalability, maintainability, modernity)
   - Architecture analysis (monolith vs microservices, cloud-native)
   - Technical debt assessment
   - Security posture evaluation

2. **ENGINEERING TEAM**
   - Team composition and experience
   - Key technical hires needed
   - Engineering culture indicators

3. **INTELLECTUAL PROPERTY**
   - Patents and proprietary technology
   - Defensibility of tech moat
   - Open source dependencies and risks

4. **TECHNICAL RISKS**
   - Scalability challenges
   - Integration complexity
   - Technology obsolescence risk

5. **TECHNICAL SCORE**
   Provide a score from 1-10 with justification.

Be specific and cite concrete concerns or strengths.""",
            "model_name": "gpt-4o",
            "max_loops": 1,
            "temperature": 0.3
        },
        {
            "agent_name": "Financial Due Diligence Expert",
            "description": "Analyzes financials, unit economics, and valuation",
            "system_prompt": """You are a Financial Due Diligence Expert with extensive VC and PE experience.

Your analysis should cover:

1. **FINANCIAL HEALTH**
   - Revenue analysis and growth trajectory
   - Burn rate and runway assessment
   - Unit economics (CAC, LTV, margins)
   - Path to profitability

2. **VALUATION ANALYSIS**
   - Valuation relative to stage and metrics
   - Comparable company analysis
   - Investment terms assessment

3. **CAPITAL EFFICIENCY**
   - Use of previous funding
   - Planned use of new capital
   - Milestone achievability

4. **FINANCIAL RISKS**
   - Cash flow concerns
   - Revenue concentration
   - Pricing power sustainability

5. **FINANCIAL SCORE**
   Provide a score from 1-10 with justification.

Use specific numbers and benchmarks where possible.""",
            "model_name": "gpt-4o",
            "max_loops": 1,
            "temperature": 0.3
        },
        {
            "agent_name": "Market Strategy Expert",
            "description": "Evaluates market opportunity and competitive landscape",
            "system_prompt": """You are a Market Strategy Expert specializing in startup market analysis.

Your analysis should cover:

1. **MARKET OPPORTUNITY**
   - Total Addressable Market (TAM)
   - Serviceable Addressable Market (SAM)
   - Market growth rate and trends
   - Timing assessment (why now?)

2. **COMPETITIVE ANALYSIS**
   - Direct competitors and their strengths
   - Indirect competitors and substitutes
   - Competitive moat assessment
   - Barriers to entry

3. **GO-TO-MARKET**
   - Customer acquisition strategy
   - Sales cycle and model
   - Channel strategy
   - Geographic expansion potential

4. **MARKET RISKS**
   - Market timing risk
   - Competitive response risk
   - Regulatory/market shift risks

5. **MARKET SCORE**
   Provide a score from 1-10 with justification.

Support with market data and competitive intelligence.""",
            "model_name": "gpt-4o",
            "max_loops": 1,
            "temperature": 0.3
        },
        {
            "agent_name": "Legal & Governance Expert",
            "description": "Reviews legal structure, compliance, and governance",
            "system_prompt": """You are a Legal Due Diligence Expert with startup and VC legal experience.

Your analysis should cover:

1. **CORPORATE STRUCTURE**
   - Entity type and jurisdiction
   - Cap table cleanliness
   - Founder vesting and equity structure
   - Previous funding terms and rights

2. **REGULATORY COMPLIANCE**
   - Industry-specific regulations
   - Data privacy compliance (GDPR, CCPA)
   - Licensing requirements
   - International compliance needs

3. **INTELLECTUAL PROPERTY**
   - IP ownership and assignments
   - Trademark and patent status
   - Employee IP agreements
   - Open source license compliance

4. **LEGAL RISKS**
   - Pending or potential litigation
   - Contractual obligations and restrictions
   - Founder/key person risks
   - Regulatory change exposure

5. **LEGAL SCORE**
   Provide a score from 1-10 with justification.

Flag any deal-breakers or significant concerns.""",
            "model_name": "gpt-4o",
            "max_loops": 1,
            "temperature": 0.3
        }
    ]
```

### Step 4: Build the Due Diligence Function

```python
def run_due_diligence(startup: StartupProfile) -> dict:
    """
    Run comprehensive due diligence with multiple expert perspectives.

    Args:
        startup: StartupProfile containing company information

    Returns:
        dict: API response with all expert analyses
    """

    swarm_config = {
        "name": f"Due Diligence: {startup.name}",
        "description": f"Multi-expert due diligence for {startup.name} ({startup.stage})",
        "swarm_type": "MixtureOfAgents",
        "task": f"""Conduct comprehensive due diligence analysis for investment consideration.

{startup.to_prompt_context()}

Each expert should provide their specialized analysis of this startup.
Be thorough, specific, and highlight both opportunities and risks.
Conclude with a clear investment recommendation from your perspective.""",
        "agents": create_due_diligence_experts(),
        "max_loops": 1
    }

    response = requests.post(
        f"{API_BASE_URL}/v1/swarm/completions",
        headers=headers,
        json=swarm_config,
        timeout=180
    )

    if response.status_code == 200:
        return response.json()
    else:
        raise Exception(f"API Error: {response.status_code} - {response.text}")
```

### Step 5: Create the Investment Report Generator

```python
def generate_investment_report(result: dict, startup: StartupProfile):
    """Generate a formatted investment report from expert analyses."""

    print("\n" + "=" * 70)
    print(f"üìä INVESTMENT DUE DILIGENCE REPORT")
    print(f"   Company: {startup.name}")
    print(f"   Stage: {startup.stage} | Seeking: {startup.funding_sought}")
    print("=" * 70)

    outputs = result.get("output", [])
    scores = {}

    # Display each expert's analysis
    for output in outputs:
        expert = output.get("role", "Unknown Expert")
        content = output.get("content", "")

        # Try to extract score from content
        score = extract_score(content)
        if score:
            scores[expert] = score

        print(f"\n{'‚îÄ' * 70}")
        print(f"üë§ {expert.upper()}")
        if score:
            print(f"   Score: {score}/10")
        print(f"{'‚îÄ' * 70}")

        # Display analysis (truncated for readability)
        display_content = content[:2000] + "..." if len(content) > 2000 else content
        print(display_content)

    # Calculate aggregate score
    if scores:
        avg_score = sum(scores.values()) / len(scores)
        print(f"\n{'=' * 70}")
        print("üìà AGGREGATE ASSESSMENT")
        print(f"{'=' * 70}")

        for expert, score in scores.items():
            short_name = expert.replace(" Due Diligence Expert", "").replace(" Expert", "")
            bar = "‚ñà" * score + "‚ñë" * (10 - score)
            print(f"   {short_name:20} [{bar}] {score}/10")

        print(f"\n   {'OVERALL SCORE':20} {avg_score:.1f}/10")

        # Investment recommendation
        if avg_score >= 8:
            recommendation = "STRONG BUY - Proceed with investment"
        elif avg_score >= 6:
            recommendation = "CONDITIONAL - Address key concerns before proceeding"
        elif avg_score >= 4:
            recommendation = "CAUTIOUS - Significant risks require mitigation"
        else:
            recommendation = "PASS - Too many red flags"

        print(f"\n   üí° RECOMMENDATION: {recommendation}")

    # Cost and execution summary
    usage = result.get("usage", {})
    billing = usage.get("billing_info", {})

    print(f"\n{'=' * 70}")
    print("üí∞ ANALYSIS COSTS")
    print(f"   Execution time: {result.get('execution_time', 0):.1f}s")
    print(f"   Total tokens: {usage.get('total_tokens', 0):,}")
    print(f"   Total cost: ${billing.get('total_cost', 0):.4f}")
    print("=" * 70)


def extract_score(content: str) -> Optional[int]:
    """Extract numerical score from expert analysis content."""
    import re

    # Look for patterns like "Score: 7/10" or "score from 1-10: 8"
    patterns = [
        r'score[:\s]+(\d+)/10',
        r'score[:\s]+(\d+)\s*/\s*10',
        r'(\d+)/10',
        r'score[:\s]+(\d+)',
    ]

    for pattern in patterns:
        match = re.search(pattern, content.lower())
        if match:
            score = int(match.group(1))
            if 1 <= score <= 10:
                return score

    return None
```

### Step 6: Run Complete Due Diligence

```python
def main():
    # Define the startup to analyze
    startup = StartupProfile(
        name="DataFlow AI",
        industry="Enterprise SaaS / AI",
        description="""DataFlow AI is building an AI-powered data integration platform
        that automates ETL pipelines using natural language. Users describe their
        data transformation needs in plain English, and the platform generates
        and maintains the required pipelines automatically.""",
        founded_year=2023,
        stage="Seed",
        funding_sought="$4M Seed Round",
        team_size=12,
        revenue="$180K ARR, growing 25% MoM",
        tech_stack="Python, Kubernetes, PostgreSQL, GPT-4 API, React",
        key_metrics="45 paying customers, 92% retention, $4K ACV",
        competitors="Fivetran, Airbyte, dbt, Matillion"
    )

    print("üîç Starting Due Diligence Analysis...")
    print(f"   Company: {startup.name}")
    print(f"   Experts: Technical, Financial, Market, Legal")
    print(f"   Running MixtureOfAgents analysis...\n")

    try:
        # Run due diligence
        result = run_due_diligence(startup)

        # Generate report
        generate_investment_report(result, startup)

        # Save detailed report
        save = input("\n\nSave full report to JSON? (y/n): ").lower() == 'y'
        if save:
            filename = f"due_diligence_{startup.name.replace(' ', '_').lower()}.json"
            with open(filename, 'w') as f:
                json.dump({
                    "startup": startup.__dict__,
                    "analysis": result
                }, f, indent=2)
            print(f"‚úÖ Saved to {filename}")

    except Exception as e:
        print(f"‚ùå Error: {e}")


if __name__ == "__main__":
    main()
```

### Step 7: Add Follow-up Deep Dive Capability

Allow users to request deeper analysis on specific concerns:

```python
def deep_dive_analysis(
    startup: StartupProfile,
    area: str,
    specific_concern: str
) -> dict:
    """
    Run a focused deep-dive on a specific area of concern.

    Args:
        startup: The startup being analyzed
        area: "technical", "financial", "market", or "legal"
        specific_concern: The specific issue to investigate

    Returns:
        dict: Detailed analysis response
    """

    deep_dive_prompts = {
        "technical": """You are conducting a technical deep-dive investigation.
Focus specifically on: {concern}

Provide:
1. Detailed risk assessment
2. Technical questions to ask the founders
3. Red flags to watch for
4. Mitigation strategies if we proceed
5. Comparable situations from other startups""",

        "financial": """You are conducting a financial deep-dive investigation.
Focus specifically on: {concern}

Provide:
1. Detailed financial analysis of this concern
2. What additional data to request
3. Benchmarks from comparable companies
4. Scenarios (best/base/worst case)
5. Deal structure recommendations to mitigate risk""",

        "market": """You are conducting a market deep-dive investigation.
Focus specifically on: {concern}

Provide:
1. Detailed market analysis of this concern
2. Competitive intelligence needed
3. Customer references to request
4. Market scenarios to model
5. Strategic recommendations""",

        "legal": """You are conducting a legal deep-dive investigation.
Focus specifically on: {concern}

Provide:
1. Specific legal risks and exposure
2. Documents to request and review
3. Deal terms to negotiate
4. Protective provisions needed
5. Precedents from similar situations"""
    }

    prompt_template = deep_dive_prompts.get(area.lower())
    if not prompt_template:
        raise ValueError(f"Unknown area: {area}")

    swarm_config = {
        "name": f"Deep Dive: {area.title()} - {startup.name}",
        "description": f"Focused {area} analysis",
        "swarm_type": "MixtureOfAgents",
        "task": f"""{startup.to_prompt_context()}

DEEP DIVE REQUEST
=================
Area: {area.upper()}
Specific Concern: {specific_concern}

Provide a thorough investigation of this concern.""",
        "agents": [{
            "agent_name": f"{area.title()} Deep Dive Specialist",
            "description": f"Specialist in {area} due diligence deep dives",
            "system_prompt": prompt_template.format(concern=specific_concern),
            "model_name": "gpt-4o",
            "max_loops": 1,
            "temperature": 0.3
        }],
        "max_loops": 1
    }

    response = requests.post(
        f"{API_BASE_URL}/v1/swarm/completions",
        headers=headers,
        json=swarm_config,
        timeout=120
    )

    if response.status_code == 200:
        return response.json()
    else:
        raise Exception(f"API Error: {response.status_code} - {response.text}")


# Example usage:
# deep_dive_result = deep_dive_analysis(
#     startup,
#     area="technical",
#     specific_concern="Reliance on GPT-4 API - what happens if OpenAI changes pricing or terms?"
# )
```

### Expected Output

```
üîç Starting Due Diligence Analysis...
   Company: DataFlow AI
   Experts: Technical, Financial, Market, Legal
   Running MixtureOfAgents analysis...

======================================================================
üìä INVESTMENT DUE DILIGENCE REPORT
   Company: DataFlow AI
   Stage: Seed | Seeking: $4M Seed Round
======================================================================

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üë§ TECHNICAL DUE DILIGENCE EXPERT
   Score: 7/10
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
**TECHNOLOGY ASSESSMENT**

The tech stack (Python, Kubernetes, PostgreSQL, React) is modern and
appropriate for an enterprise SaaS product. Key observations:

- ‚úÖ Cloud-native architecture enables scalability
- ‚úÖ Python ecosystem ideal for AI/ML workloads
- ‚ö†Ô∏è Heavy dependency on GPT-4 API creates vendor risk
- ‚ö†Ô∏è Need to assess data security for enterprise customers
...

======================================================================
üìà AGGREGATE ASSESSMENT
======================================================================
   Technical           [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë] 7/10
   Financial           [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë] 8/10
   Market              [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë] 7/10
   Legal               [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë] 6/10

   OVERALL SCORE       7.0/10

   üí° RECOMMENDATION: CONDITIONAL - Address key concerns before proceeding

======================================================================
üí∞ ANALYSIS COSTS
   Execution time: 42.3s
   Total tokens: 8,450
   Total cost: $0.1523
======================================================================
```

### Key Takeaways

1. **Same Input, Different Lenses**: All experts analyze identical information but through their specialized perspective. This reveals blind spots a single analyst might miss.

2. **Structured Scoring**: Having each expert provide a score enables quantitative aggregation while preserving qualitative insights.

3. **Complementary Expertise**: Design agents with distinct but complementary skills. Overlap creates redundancy; gaps create blind spots.

4. **Decision Support, Not Decisions**: MixtureOfAgents provides comprehensive input for human decision-makers, not autonomous decisions.

5. **Follow-up Capability**: Initial broad analysis often surfaces specific concerns that warrant deeper investigation.

### MixtureOfAgents vs. Other Architectures

| Use MixtureOfAgents When | Don't Use When |
|-------------------------|----------------|
| Need multiple expert perspectives on ONE topic | Tasks are independent (use ConcurrentWorkflow) |
| Decision requires diverse viewpoints | Tasks need to build sequentially (use SequentialWorkflow) |
| Quality matters more than speed | You need to route to ONE expert (use MultiAgentRouter) |
| Synthesizing complex, multi-faceted problems | Simple, single-domain tasks |

## Best Practices

- Design agents with complementary but distinct expertise areas
- Use for complex tasks requiring multiple perspectives
- Ensure agents can work collaboratively on the same problem
- Ideal for comprehensive analysis and decision-making

